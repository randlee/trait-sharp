{
  "metadata": {
    "benchmarkClass": "RectSum1DBenchmarks",
    "title": "1D Rectangle Array \u2014 Strided Trait Access",
    "description": "Sum fields from BenchmarkRect[480,000] (16 bytes per element). Rectangle implements two traits: ICoordinate (X,Y at offset 0) and ISize (Width,Height at offset 8). Trait spans must stride over 16-byte elements to access 8-byte trait views \u2014 the core strided access pattern.",
    "elementType": "BenchmarkRect",
    "elementSize": 16,
    "arrayLength": 480000,
    "totalBytes": 7680000,
    "timestamp": "2026-02-16T15:30:00Z",
    "environment": {
      "cpu": "Apple M4 Max",
      "cpuId": "apple-m4-max",
      "os": "macOS 15.3.1 (24D70)",
      "osSlug": "macos",
      "arch": "ARM64",
      "dotnetSdk": "9.0.200",
      "runtime": ".NET 9.0.2 (9.0.225.6610), Arm64 RyuJIT AdvSIMD",
      "benchmarkDotNet": "v0.14.0"
    }
  },
  "comparisonGroups": [
    {
      "id": "rect-1d-coord-foreach",
      "name": "Coordinate foreach \u2014 Primary (X + Y)",
      "description": "Sum X + Y using foreach. Coordinate trait at offset 0. Native Span foreach returns ref BenchmarkRect; TraitSpan foreach uses pointer-increment cursor striding 16 bytes per step.",
      "baseline": "NativeSpan_Foreach_CoordSum1D",
      "methods": [
        {
          "name": "NativeSpan_Foreach_CoordSum1D",
          "label": "Span<BenchmarkRect> foreach (ref)",
          "codeSnippet": "foreach (ref var r in _array.AsSpan())\n    sum += r.X + r.Y;",
          "isBaseline": true,
          "mean_us": 154.2,
          "error_us": 1.07,
          "stddev_us": 1.42,
          "gbPerSec": 9.54,
          "allocated": 0
        },
        {
          "name": "TraitSpan_Foreach_CoordSum1D",
          "label": "TraitSpan foreach (ref readonly)",
          "codeSnippet": "foreach (ref readonly var coord in _array.AsCoordinateSpan())\n    sum += coord.X + coord.Y;",
          "isBaseline": false,
          "mean_us": 155.8,
          "error_us": 0.51,
          "stddev_us": 0.67,
          "gbPerSec": 9.44,
          "allocated": 0
        },
        {
          "name": "TraitSpan_Indexer_CoordSum1D",
          "label": "TraitSpan Indexer (reference)",
          "codeSnippet": "var span = _array.AsCoordinateSpan();\nfor (int i = 0; i < span.Length; i++)\n    sum += span[i].X + span[i].Y;",
          "isBaseline": false,
          "mean_us": 165.3,
          "error_us": 0.46,
          "stddev_us": 0.61,
          "gbPerSec": 8.9,
          "allocated": 0
        }
      ]
    },
    {
      "id": "rect-1d-size-foreach",
      "name": "Size foreach \u2014 Primary (Width + Height)",
      "description": "Sum Width + Height using foreach. Size trait at offset 8 (non-zero offset penalty). Measures strided foreach with a non-zero trait offset.",
      "baseline": "NativeSpan_Foreach_SizeSum1D",
      "methods": [
        {
          "name": "NativeSpan_Foreach_SizeSum1D",
          "label": "Span<BenchmarkRect> foreach (ref)",
          "codeSnippet": "foreach (ref var r in _array.AsSpan())\n    sum += r.Width + r.Height;",
          "isBaseline": true,
          "mean_us": 163.1,
          "error_us": 0.8,
          "stddev_us": 1.07,
          "gbPerSec": 9.02,
          "allocated": 0
        },
        {
          "name": "TraitSpan_Foreach_SizeSum1D",
          "label": "TraitSpan foreach (ref readonly)",
          "codeSnippet": "foreach (ref readonly var size in _array.AsSizeSpan())\n    sum += size.Width + size.Height;",
          "isBaseline": false,
          "mean_us": 159.7,
          "error_us": 0.41,
          "stddev_us": 0.55,
          "gbPerSec": 9.21,
          "allocated": 0
        },
        {
          "name": "TraitSpan_Indexer_SizeSum1D",
          "label": "TraitSpan Indexer (reference)",
          "codeSnippet": "var span = _array.AsSizeSpan();\nfor (int i = 0; i < span.Length; i++)\n    sum += span[i].Width + span[i].Height;",
          "isBaseline": false,
          "mean_us": 165.3,
          "error_us": 0.86,
          "stddev_us": 1.14,
          "gbPerSec": 8.9,
          "allocated": 0
        }
      ]
    },
    {
      "id": "rect-1d-all-fields",
      "name": "All Fields \u2014 Dual Trait (X + Y + Width + Height)",
      "description": "Sum all 4 fields. Compares native foreach, fused Zip enumerator (two pointer-increment cursors in lockstep), and dual indexer access.",
      "baseline": "NativeSpan_Foreach_AllFieldsSum1D",
      "methods": [
        {
          "name": "NativeSpan_Foreach_AllFieldsSum1D",
          "label": "Span<BenchmarkRect> foreach \u2014 all fields",
          "codeSnippet": "foreach (ref var r in _array.AsSpan())\n    sum += r.X + r.Y + r.Width + r.Height;",
          "isBaseline": true,
          "mean_us": 155.1,
          "error_us": 1.1,
          "stddev_us": 1.46,
          "gbPerSec": 9.48,
          "allocated": 0
        },
        {
          "name": "TraitSpan_ZipForeach_AllFieldsSum1D",
          "label": "Zip Enumerator (fused pointer walk)",
          "codeSnippet": "foreach (var pair in coordSpan.Zip(sizeSpan))\n    sum += pair.First.X + pair.First.Y\n         + pair.Second.Width + pair.Second.Height;",
          "isBaseline": false,
          "mean_us": 173.5,
          "error_us": 0.3,
          "stddev_us": 0.39,
          "gbPerSec": 8.48,
          "allocated": 0
        },
        {
          "name": "TraitSpan_DualIndexer_AllFieldsSum1D",
          "label": "Two TraitSpan Indexers (reference)",
          "codeSnippet": "for (int i = 0; i < coordSpan.Length; i++)\n    sum += coordSpan[i].X + coordSpan[i].Y\n         + sizeSpan[i].Width + sizeSpan[i].Height;",
          "isBaseline": false,
          "mean_us": 234.4,
          "error_us": 0.68,
          "stddev_us": 0.9,
          "gbPerSec": 6.28,
          "allocated": 0
        }
      ]
    }
  ]
}

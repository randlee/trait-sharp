{
  "metadata": {
    "benchmarkClass": "RectSum2DBenchmarks",
    "title": "2D Rectangle Array \u2014 Strided Trait Access",
    "description": "Sum fields from BenchmarkRect[800\u00d7600] with 2D access patterns and strided trait views.",
    "elementType": "BenchmarkRect",
    "elementSize": 16,
    "arrayLength": 480000,
    "totalBytes": 7680000,
    "timestamp": "2026-02-16T15:30:00Z",
    "environment": {
      "cpu": "Apple M4 Max",
      "cpuId": "apple-m4-max",
      "os": "macOS 15.3.1 (24D70)",
      "osSlug": "macos",
      "arch": "ARM64",
      "dotnetSdk": "9.0.200",
      "runtime": ".NET 9.0.2 (9.0.225.6610), Arm64 RyuJIT AdvSIMD",
      "benchmarkDotNet": "v0.14.0"
    }
  },
  "comparisonGroups": [
    {
      "id": "rect-2d-coord-foreach",
      "name": "2D Coordinate Row foreach \u2014 Primary (X + Y)",
      "description": "Sum X + Y using row-slice foreach. Native Span uses Slice+foreach; TraitSpan2D uses GetRow+foreach with pointer-increment cursors.",
      "baseline": "NativeSpan_RowSlice_CoordSum2D",
      "methods": [
        {
          "name": "NativeSpan_RowSlice_CoordSum2D",
          "label": "Span<BenchmarkRect> Slice + foreach (ref)",
          "codeSnippet": "for (int row = 0; row < Height; row++)\n    foreach (ref var r in flat.Slice(row * Width, Width))\n        sum += r.X + r.Y;",
          "isBaseline": true,
          "mean_us": 157.2,
          "error_us": 0.38,
          "stddev_us": 0.51,
          "gbPerSec": 9.36,
          "allocated": 0
        },
        {
          "name": "TraitSpan2D_RowForeach_CoordSum2D",
          "label": "TraitSpan2D GetRow + foreach",
          "codeSnippet": "for (int row = 0; row < span2d.Height; row++)\n    foreach (ref readonly var coord in span2d.GetRow(row))\n        sum += coord.X + coord.Y;",
          "isBaseline": false,
          "mean_us": 157.7,
          "error_us": 1.22,
          "stddev_us": 1.63,
          "gbPerSec": 9.33,
          "allocated": 0
        },
        {
          "name": "TraitSpan2D_Indexer_CoordSum2D",
          "label": "TraitSpan2D [row, col] Indexer (reference)",
          "codeSnippet": "for (int row = 0; row < span2d.Height; row++)\n    for (int col = 0; col < span2d.Width; col++)\n        sum += span2d[row, col].X + span2d[row, col].Y;",
          "isBaseline": false,
          "mean_us": 319.1,
          "error_us": 3.95,
          "stddev_us": 5.26,
          "gbPerSec": 4.61,
          "allocated": 0
        }
      ]
    },
    {
      "id": "rect-2d-all-fields",
      "name": "2D All Fields \u2014 Dual Trait Row foreach",
      "description": "Sum all 4 fields using row-based iteration. Compares native Slice+foreach, Zip row enumerator (fused pointer walk), and dual 2D indexer access.",
      "baseline": "NativeSpan_RowSlice_AllFieldsSum2D",
      "methods": [
        {
          "name": "NativeSpan_RowSlice_AllFieldsSum2D",
          "label": "Span<BenchmarkRect> Slice + foreach \u2014 all fields",
          "codeSnippet": "for (int row = 0; row < Height; row++)\n    foreach (ref var r in flat.Slice(row * Width, Width))\n        sum += r.X + r.Y + r.Width + r.Height;",
          "isBaseline": true,
          "mean_us": 195.3,
          "error_us": 0.6,
          "stddev_us": 0.8,
          "gbPerSec": 7.53,
          "allocated": 0
        },
        {
          "name": "TraitSpan2D_RowForeach_AllFieldsSum2D",
          "label": "Zip Row Enumerator (fused pointer walk)",
          "codeSnippet": "var coordRow = coordSpan.GetRow(row);\nvar sizeRow = sizeSpan.GetRow(row);\nforeach (var pair in coordRow.Zip(sizeRow))\n    sum += pair.First.X + ... + pair.Second.Width + ...;",
          "isBaseline": false,
          "mean_us": 244.1,
          "error_us": 3.01,
          "stddev_us": 4.01,
          "gbPerSec": 6.03,
          "allocated": 0
        },
        {
          "name": "TraitSpan2D_DualIndexer_AllFieldsSum2D",
          "label": "Two TraitSpan2D Indexers (reference)",
          "codeSnippet": "for (int row = 0; row < Height; row++)\n    for (int col = 0; col < Width; col++)\n        sum += coordSpan[row,col].X + ... + sizeSpan[row,col].Width + ...;",
          "isBaseline": false,
          "mean_us": 393.0,
          "error_us": 2.41,
          "stddev_us": 3.21,
          "gbPerSec": 3.74,
          "allocated": 0
        }
      ]
    }
  ]
}
